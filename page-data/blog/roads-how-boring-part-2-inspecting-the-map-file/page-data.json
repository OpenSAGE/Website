{"componentChunkName":"component---src-templates-post-js","path":"/blog/roads-how-boring-part-2-inspecting-the-map-file","result":{"data":{"markdownRemark":{"html":"<p>Figuring out how to render the roads correctly in OpenSAGE turned out to be a little more challenging than expected. This is the second post in a series describing the journey. In <a href=\"/blog/roads-how-boring-part-1-taking-stock\">part 1</a> we created a test map with some roads and looked at the textures for the different road types.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2919e94633165ef5e2115130acef04cc/cb0d3/connected_roads.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.85448916408669%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAA7CAAAOwgEVKEqAAAADtElEQVQ4yx1TWW/bRhDmTymC1IdoUqIoyYoT2Yp1UuRyuVwul6TkI0cj2HXsupKvvvQ/9CHOUaT1UbtFU+StSO+H/oIGBdJYiWw0Tlob8RE5jtM8deTFYrE7M9/st9/MCr/9+vvz7e0X2883N5tbW1ubzc2D/b3Xr49eHR62Wq9gnJycvHv338nJG9i8ffvm+Pj46Kh1eHjQarWExsbGo0d/PH680djYetL4C04PH/757O9nT580m0+bkAsybzQaOzu7/7z49+XLvf39A1j39vZ3dneFmZmRqev21CSv14ZrNe/jaT47M1SvB58sjCzMDc/UKx9N8WoV12vl2rQP69zs8Gy9sjA3ND8/IpSKIa3YgYxOgruNUqdpdBl6B0bdltmtax25zJl87qxR6gK7ibogAOld4DKNTkokwXeTPlddpniu6lCF2grBMsFhx1ZcpsJKSZg5EfAGXvw0JmJbYQuHPTcheDzBmQJnoyTqWkgvibD33CgYMZIA6ToRl0XbFlexiayXgKAIk9Go4FCVWBI2JaSLyOgxdJFgidEwgKkdsYCFJREiUyIzKls4pmkqhOlaN8GKwFnCsWWIa7O1gHAPZxHmyC6L+DwK11IAY0gq53O9mUwKoz7XAVI9jKoCc+KMRuAqyE2sGLHgeM5z+6gdN5GCDAXpCjbPZ7PpwYspZCSwGTH0MMRXgqRgYQWIOVTGSMnnz2taCmahkNK1wXyuf6A/OZBOpNO96XQym+3Tiv3FYjqfu2CUgKAqEEu1LRl0Zm0Ze+AJnIVBgrErzsS1AJXUQgEKGYJplEKgJXD23RgyRKgLgKMWljiLAhgczD4lYkerl9hktUKtBMhrmTJEwzsdG4oEygE+6vO4YJOoZYoIhUoadAhEiCYSuXOu9uHo2GUOYLDrmoj0Hpe29bOJBEyZEx4qJwAMqoQ5HSAoyUiq4mUCdnFqzP90bmz8ik9wrFh8H5twJygsAsGAqzYRQSPPUwWXxT8YRdevDU+Pj85OXq1PXKpPXJ6fro5f5QEbBFU8NxJ4atmPQ+WGgkTAlbKvVvxEW21Kem18IXAzw0G2wjOekynzQpnnHJJ0aBgAXrvaMrQXpZJN2l0QeDG/naJX0DUpmzmTzbynFc8aRic0PUYh0Aa+CtJD1JaQ0YVOvwogwWtj0SHQgpLrRIWlL26sLN9cX/t8bfXW+vqdr9dvf7N+Z2319sry4srSzaXlG6srt1ZXFu/e/ezevS9/+fn+Tz/e/+HBt1+tLj74/rv/ASRbl8JCTr3BAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Test map\"\n        title=\"Test map\"\n        src=\"/static/2919e94633165ef5e2115130acef04cc/34e8a/connected_roads.png\"\n        srcset=\"/static/2919e94633165ef5e2115130acef04cc/d4214/connected_roads.png 150w,\n/static/2919e94633165ef5e2115130acef04cc/135ae/connected_roads.png 300w,\n/static/2919e94633165ef5e2115130acef04cc/34e8a/connected_roads.png 600w,\n/static/2919e94633165ef5e2115130acef04cc/cb0d3/connected_roads.png 646w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Now that we finished our road network, let's save the map and see how all this information is stored in the map file...or rather, how it's <em>not</em> stored. While we can observe the described behavior (close endpoints are merged to form connected roads and crossings) in World Builder, the map file doesn't really care about these connections. Roads are not stored as separate objects. Instead, there's simply a pair of map objects for each road segment (the same kind of objects that are used for trees, buildings, units, props, etc) with some flags.</p>\n<p>For our map above, it looks like this:</p>\n<table>\n<thead>\n<tr>\n<th>ObjectType</th>\n<th>X</th>\n<th>Y</th>\n<th>RoadType</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>TwoLaneDarkDotted</td>\n<td>191</td>\n<td>412</td>\n<td>Start</td>\n</tr>\n<tr>\n<td>TwoLaneDarkDotted</td>\n<td>346</td>\n<td>410</td>\n<td>End</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>TwoLaneDarkDotted</td>\n<td>450</td>\n<td>407</td>\n<td>Start</td>\n</tr>\n<tr>\n<td>TwoLaneDarkDotted</td>\n<td>346</td>\n<td>410</td>\n<td>End</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>TwoLaneDarkDotted</td>\n<td>471</td>\n<td>540</td>\n<td>Start</td>\n</tr>\n<tr>\n<td>TwoLaneDarkDotted</td>\n<td>346</td>\n<td>410</td>\n<td>End</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>TwoLaneOld2</td>\n<td>288</td>\n<td>288</td>\n<td>Start | TightCurve</td>\n</tr>\n<tr>\n<td>TwoLaneOld2</td>\n<td>182</td>\n<td>289</td>\n<td>End</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>TwoLaneOld2</td>\n<td>288</td>\n<td>288</td>\n<td>Start | TightCurve</td>\n</tr>\n<tr>\n<td>TwoLaneOld2</td>\n<td>291</td>\n<td>393</td>\n<td>End</td>\n</tr>\n</tbody>\n</table>\n<p>The <code>RoadType</code> is a bit field that contains information about whether this is a start or end point and about the curve type (the default is <code>BroadCurve</code>, whereas <code>TightCurve</code> and <code>Angled</code> have their own bits).</p>\n<p>So all we know are the start and end positions of all road segments, but there's no information about the connections of these segments. It appears that two segments of the same type are connected when they share one of their positions.\nIn order to correctly draw the different road textures (remember, there are different types of crossings), we need to create a data structure that can be reasoned about more easily. We'll do that in the next part.</p>","frontmatter":{"slug":"roads-how-boring-part-2-inspecting-the-map-file","title":"Roads? How boring! Part 2: Inspecting the map file","summary":"Part 2 of the series about rendering the roads in SAGE maps: Finding out how the roads are stored in the map files","author":"Daniel Sklenitzka","date":"2020-02-19"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"roads-how-boring-part-2-inspecting-the-map-file"}}}